name: bids_validator
# How to install this software from pre-compiled binaries.
binaries:
  # The available versions and their corresponding urls.
  urls:
    "1.13": "https://github.com/bids-standard/bids-validator/releases/tag/v1.13.0"
    "1.12": "https://github.com/bids-standard/bids-validator/releases/tag/v1.12.0"
  arguments:
    required:
    - version
  env:
    NODE_MAJOR: "18"
  dependencies:
    apt:
    - ca-certificates
    - curl
    - apt-utils
    - gnupg
    yum:
    - curl
  instructions: |
    {{ self.install_dependencies() }}
    mkdir -p /etc/apt/keyrings
    curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg
    echo "deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_$NODE_MAJOR.x nodistro main" | tee /etc/apt/sources.list.d/nodesource.list
    {{ self.install(["nodejs"]) }}
    npm install -g bids-validator@{{ self.version }}
